<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>d3</title>
    <script src="d3/d3.js"></script>
    <style>
      rect {
        transition: all .5s;
      }
    </style>
  </head>
  <body>
    <div id="app"></div>
    <script>
      // 宽高
      let height = 500;
      let width = 500;

      // 内边距
      let padding = {
        top: 20,
        left: 20,
        bottom: 20
      };

      let bottomAttr = ["angular","react","vue","bootstrap","mysql"];

      // 绘制的数据
      let data = [11,22,33,44,55,66];

      // 创建svg元素
      var svg = d3.select('#app').append('svg').attr('width', width).attr('height', height);
      // 设置x刻度
      var xScale = d3.scaleBand().domain(bottomAttr).rangeRound([0,width-padding.left]);
      // 将x轴添加到底部
      var xAxis = d3.axisBottom(xScale);

      // 设置y轴刻度
      var yScale = d3.scaleLinear().domain([0, d3.max(data)]).range([height-padding.top-padding.bottom, 0]);
      var yAxis = d3.axisLeft(yScale);

      // 添加x轴到svg
      svg.append('g')
        .attr('transform', 'translate(' + padding.left + ',' + (height-padding.bottom) + ')')
        .call(xAxis);

      // 添加y轴到svg
      svg.append('g')
        .attr('transform', 'translate(' + padding.left + ',' + (padding.top) + ')')
        .call(yAxis);
      
      // 添加数据
      svg.selectAll('rect')
        .data(data)
        .enter()
        .append('rect')
        .attr('transform', 'translate(' + padding.left + ',' + padding.top + ')')
        .attr('fill', 'skyblue')
        .attr('width', xScale.step()-8)
        .attr('height', function(h) {
          // console.log(h)
          return height-padding.top-padding.bottom-yScale(h);
        })
        .attr('x', function(h, i) {
          return i*xScale.step()+5;
        })
        .attr('y', function (h, i) {
          return yScale(h);
        })

        
    </script>
  </body>
</html>
